<div class="page-header">
  <div>
    <h2><i class="fas fa-users"></i> Gestão de Pastorais</h2>
    <p class="text-muted">Gerenciar grupos e pastorais da paróquia</p>
  </div>
  <button class="btn btn-primary" (click)="novo()">
    <i class="fas fa-plus"></i> Nova Pastoral
  </button>
</div>

<div class="filters-section">
  <div class="search-box">
    <i class="fas fa-search"></i>
    <input 
      type="text" 
      class="form-control" 
      placeholder="Buscar pastoral por nome ou coordenador..."
      [(ngModel)]="termoBusca"
      (ngModelChange)="filtrar()">
  </div>
</div>

<div class="content-card">
  @if (carregando) {
    <div class="text-center py-5">
      <i class="fas fa-spinner fa-spin fa-2x"></i><br>
      Carregando pastorais...
    </div>
  } @else {
    @if (pastoraisFiltradas.length === 0) {
      <div class="empty-state">
        <i class="fas fa-users fa-3x text-muted mb-3"></i>
        <h4>Nenhuma pastoral encontrada</h4>
        <p class="text-muted">
          @if (termoBusca) {
            Não há pastorais que correspondam à sua busca.
          } @else {
            Comece criando sua primeira pastoral clicando no botão "Nova Pastoral".
          }
        </p>
      </div>
    } @else {
      <div class="results-header">
        <p>
          <strong>{{ pastoraisFiltradas.length }}</strong> pastoral(is) encontrada(s)
        </p>
      </div>
      
      <div class="pastorais-grid">
        @for (pastoral of pastoraisFiltradas; track pastoral.id) {
          <div class="pastoral-card">
            @if (pastoral.imagemUrl) {
              <div class="pastoral-image">
                <img [src]="pastoral.imagemUrl" [alt]="pastoral.nome">
                <div class="pastoral-badges">
                  @if (pastoral.destaque) {
                    <span class="badge badge-destaque">
                      <i class="fas fa-star"></i> Destaque
                    </span>
                  }
                  @if (!pastoral.ativo) {
                    <span class="badge badge-inativo">
                      <i class="fas fa-eye-slash"></i> Inativa
                    </span>
                  }
                </div>
              </div>
            }
            
            <div class="pastoral-content">
              <h3>{{ pastoral.nome }}</h3>
              
              @if (pastoral.descricaoCurta) {
                <p class="descricao-curta">{{ pastoral.descricaoCurta }}</p>
              }
              
              <div class="pastoral-info">
                @if (pastoral.coordenador) {
                  <div class="info-item">
                    <i class="fas fa-user-tie"></i>
                    <span>{{ pastoral.coordenador }}</span>
                  </div>
                }
                
                @if (pastoral.horarioReuniao) {
                  <div class="info-item">
                    <i class="fas fa-clock"></i>
                    <span>{{ pastoral.horarioReuniao }}</span>
                  </div>
                }
                
                @if (pastoral.localReuniao) {
                  <div class="info-item">
                    <i class="fas fa-map-marker-alt"></i>
                    <span>{{ pastoral.localReuniao }}</span>
                  </div>
                }
                
                @if (pastoral.telefoneContato) {
                  <div class="info-item">
                    <i class="fas fa-phone"></i>
                    <span>{{ pastoral.telefoneContato }}</span>
                  </div>
                }
              </div>
              
              <div class="pastoral-actions">
                <button 
                  class="btn btn-sm btn-outline-primary"
                  (click)="editar(pastoral.id!)">
                  <i class="fas fa-edit"></i> Editar
                </button>
                
                <button 
                  class="btn btn-sm btn-outline-danger"
                  (click)="deletar(pastoral)">
                  <i class="fas fa-trash"></i> Deletar
                </button>
              </div>
            </div>
          </div>
        }
      </div>
    }
  }
</div>
