<div class="page-header">
  <div>
    <h2>
      <i class="fas fa-hands-praying"></i>
      {{ modo === 'criar' ? 'Nova Pastoral' : 'Editar Pastoral' }}
    </h2>
    <p class="text-muted">Preencha as informações da pastoral</p>
  </div>
  <button class="btn btn-secondary" (click)="voltar()">
    <i class="fas fa-arrow-left"></i> Voltar
  </button>
</div>

@if (carregando) {
  <div class="text-center py-5">
    <i class="fas fa-spinner fa-spin fa-2x"></i><br>
    Carregando pastoral...
  </div>
} @else {
  <div class="form-card">
    <form #pastoralForm="ngForm" (ngSubmit)="salvar()">
      
      <!-- Informações Básicas -->
      <div class="form-section">
        <h4><i class="fas fa-info-circle"></i> Informações Básicas</h4>
        
        <div class="mb-3">
          <label class="form-label">Nome *</label>
          <input
            type="text"
            class="form-control"
            [(ngModel)]="pastoral.nome"
            name="nome"
            required
            placeholder="Ex: Pastoral da Juventude">
        </div>
        
        <div class="mb-3">
          <label class="form-label">Descrição Curta</label>
          <input
            type="text"
            class="form-control"
            [(ngModel)]="pastoral.descricaoCurta"
            name="descricaoCurta"
            placeholder="Breve descrição para listagem">
          <small class="text-muted">Aparece nos cards de listagem</small>
        </div>
        
        <div class="mb-3">
          <label class="form-label">Descrição Completa</label>
          <textarea
            class="form-control"
            [(ngModel)]="pastoral.descricao"
            name="descricao"
            rows="5"
            placeholder="Descreva os objetivos e atividades da pastoral"></textarea>
        </div>
      </div>
      
      <!-- Imagem -->
      <div class="form-section">
        <h4><i class="fas fa-image"></i> Imagem da Pastoral</h4>
        
        <div class="mb-3">
          <label class="form-label">Selecionar Imagem</label>
          <input
            type="file"
            class="form-control"
            (change)="onImagemSelecionada($event)"
            accept="image/*">
          <small class="text-muted">A imagem será salva no servidor</small>
        </div>
        
        <div class="mb-3">
          <label class="form-label">Ou Cole URL Externa</label>
          <input
            type="url"
            class="form-control"
            [(ngModel)]="pastoral.imagemUrl"
            name="imagemUrl"
            placeholder="https://exemplo.com/imagem.jpg"
            (ngModelChange)="previewImagem = pastoral.imagemUrl || null">
          <small class="text-muted">Alternativa: URL externa</small>
        </div>
        
        @if (previewImagem) {
          <div class="image-preview">
            <img [src]="previewImagem" alt="Preview">
            <button type="button" class="btn btn-danger btn-sm" (click)="removerImagem()">
              <i class="fas fa-trash"></i> Remover Imagem
            </button>
          </div>
        }
      </div>
      
      <!-- Coordenação e Contato -->
      <div class="form-section">
        <h4><i class="fas fa-user-tie"></i> Coordenação e Contato</h4>
        
        <div class="row">
          <div class="col-md-6">
            <div class="mb-3">
              <label class="form-label">Coordenador</label>
              <input
                type="text"
                class="form-control"
                [(ngModel)]="pastoral.coordenador"
                name="coordenador"
                placeholder="Nome do coordenador">
            </div>
          </div>
          
          <div class="col-md-6">
            <div class="mb-3">
              <label class="form-label">Telefone</label>
              <input
                type="tel"
                class="form-control"
                [(ngModel)]="pastoral.telefoneContato"
                name="telefoneContato"
                placeholder="(00) 00000-0000">
            </div>
          </div>
        </div>
        
        <div class="mb-3">
          <label class="form-label">E-mail</label>
          <input
            type="email"
            class="form-control"
            [(ngModel)]="pastoral.emailContato"
            name="emailContato"
            placeholder="pastoral@exemplo.com">
        </div>
      </div>
      
      <!-- Reuniões -->
      <div class="form-section">
        <h4><i class="fas fa-calendar-check"></i> Informações de Reunião</h4>
        
        <div class="row">
          <div class="col-md-6">
            <div class="mb-3">
              <label class="form-label">Local de Reunião</label>
              <input
                type="text"
                class="form-control"
                [(ngModel)]="pastoral.localReuniao"
                name="localReuniao"
                placeholder="Ex: Salão Paroquial">
            </div>
          </div>
          
          <div class="col-md-6">
            <div class="mb-3">
              <label class="form-label">Horário de Reunião</label>
              <input
                type="text"
                class="form-control"
                [(ngModel)]="pastoral.horarioReuniao"
                name="horarioReuniao"
                placeholder="Ex: Sábados às 14h">
            </div>
          </div>
        </div>
      </div>
      
      <!-- Configurações -->
      <div class="form-section">
        <h4><i class="fas fa-cog"></i> Configurações</h4>
        
        <div class="row">
          <div class="col-md-4">
            <div class="mb-3">
              <label class="form-label">Ordem de Exibição</label>
              <input
                type="number"
                class="form-control"
                [(ngModel)]="pastoral.ordemExibicao"
                name="ordemExibicao"
                placeholder="0">
              <small class="text-muted">Menor número aparece primeiro</small>
            </div>
          </div>
          
          <div class="col-md-4">
            <div class="form-check mb-3">
              <input
                type="checkbox"
                class="form-check-input"
                [(ngModel)]="pastoral.ativo"
                name="ativo"
                id="ativo">
              <label class="form-check-label" for="ativo">
                Pastoral ativa
              </label>
            </div>
          </div>
          
          <div class="col-md-4">
            <div class="form-check mb-3">
              <input
                type="checkbox"
                class="form-check-input"
                [(ngModel)]="pastoral.destaque"
                name="destaque"
                id="destaque">
              <label class="form-check-label" for="destaque">
                Colocar em destaque
              </label>
            </div>
          </div>
        </div>
      </div>
      
      <!-- Botões -->
      <div class="form-actions">
        <button type="button" class="btn btn-secondary" (click)="voltar()">
          <i class="fas fa-times"></i> Cancelar
        </button>
        <button type="submit" class="btn btn-primary" [disabled]="salvando">
          @if (salvando) {
            <i class="fas fa-spinner fa-spin"></i>
          } @else {
            <i class="fas fa-save"></i>
          }
          {{ modo === 'criar' ? 'Criar Pastoral' : 'Salvar Alterações' }}
        </button>
      </div>
      
    </form>
  </div>
}
