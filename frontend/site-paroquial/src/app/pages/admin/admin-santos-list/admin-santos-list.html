<div class="page-header">
  <div>
    <h2><i class="fas fa-book-bible"></i> Gestão de Santos</h2>
    <p class="text-muted">Gerenciar santos e celebrações litúrgicas</p>
  </div>
  <button class="btn btn-primary" (click)="novo()">
    <i class="fas fa-plus"></i> Novo Santo
  </button>
</div>

<div class="filters-section">
  <div class="row">
    <div class="col-md-8">
      <div class="search-box">
        <i class="fas fa-search"></i>
        <input 
          type="text" 
          class="form-control" 
          placeholder="Buscar santo por nome ou título..."
          [(ngModel)]="termoBusca"
          (ngModelChange)="filtrar()">
      </div>
    </div>
    <div class="col-md-4">
      <select 
        class="form-select" 
        [(ngModel)]="mesFiltro"
        (ngModelChange)="filtrar()">
        <option *ngFor="let m of meses" [ngValue]="m.valor">{{ m.nome }}</option>
      </select>
    </div>
  </div>
</div>

<div class="content-card">
  @if (carregando) {
    <div class="text-center py-5">
      <i class="fas fa-spinner fa-spin fa-2x"></i><br>
      Carregando santos...
    </div>
  } @else {
    @if (santosFiltrados.length === 0) {
      <div class="empty-state">
        <i class="fas fa-book-bible fa-3x text-muted mb-3"></i>
        <h4>Nenhum santo encontrado</h4>
        <p class="text-muted">
          @if (termoBusca || mesFiltro) {
            Não há santos que correspondam aos filtros selecionados.
          } @else {
            Comece criando o primeiro santo clicando no botão "Novo Santo".
          }
        </p>
      </div>
    } @else {
      <div class="results-header">
        <p>
          <strong>{{ santosFiltrados.length }}</strong> santo(s) encontrado(s)
        </p>
      </div>
      
      <div class="santos-grid">
        @for (santo of santosFiltrados; track santo.id) {
          <div class="santo-card">
            <div class="santo-date">
              <div class="date-day">{{ santo.dia }}</div>
              <div class="date-month">{{ getNomeMes(santo.mes) }}</div>
            </div>
            
            @if (santo.imagemUrl) {
              <div class="santo-image">
                <img [src]="santo.imagemUrl" [alt]="santo.nome">
                @if (!santo.ativo) {
                  <div class="santo-badge-inativo">
                    <span class="badge badge-inativo">
                      <i class="fas fa-eye-slash"></i> Inativo
                    </span>
                  </div>
                }
              </div>
            }
            
            <div class="santo-content">
              <h3>{{ santo.nome }}</h3>
              
              @if (santo.titulo) {
                <p class="santo-titulo">{{ santo.titulo }}</p>
              }
              
              @if (santo.descricaoResumida) {
                <p class="santo-descricao">{{ santo.descricaoResumida }}</p>
              }
              
              <div class="santo-info">
                <div class="info-item">
                  <i class="fas fa-calendar"></i>
                  <span>{{ getDataFormatada(santo) }}</span>
                </div>
                
                @if (santo.festaLiturgica) {
                  <div class="info-item">
                    <i class="fas fa-cross"></i>
                    <span>{{ santo.festaLiturgica }}</span>
                  </div>
                }
                
                @if (santo.fonte) {
                  <div class="info-item">
                    <i class="fas fa-link"></i>
                    <a [href]="santo.fonte" target="_blank">Vatican News</a>
                  </div>
                }
              </div>
              
              <div class="santo-actions">
                <button 
                  class="btn btn-sm btn-outline-primary"
                  (click)="editar(santo.id!)">
                  <i class="fas fa-edit"></i> Editar
                </button>
                
                <button 
                  class="btn btn-sm btn-outline-danger"
                  (click)="deletar(santo)">
                  <i class="fas fa-trash"></i> Deletar
                </button>
              </div>
            </div>
          </div>
        }
      </div>
    }
  }
</div>
