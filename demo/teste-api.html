<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Teste - API da BÃ­blia</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; }
        .resultado { background: #f5f5f5; padding: 15px; margin: 10px 0; border-radius: 5px; }
        .erro { background: #ffebee; color: #c62828; }
        .sucesso { background: #e8f5e8; color: #2e7d32; }
        button { padding: 10px 20px; margin: 5px; cursor: pointer; }
        .loading { color: #1976d2; }
    </style>
    <script src="biblia-api.js"></script>
</head>
<body>
    <h1>ğŸ§ª Teste da API da BÃ­blia</h1>
    
    <div>
        <h3>Testes DisponÃ­veis:</h3>
        <button onclick="testarGenesis1()">GÃªnesis 1</button>
        <button onclick="testarJoao316()">JoÃ£o 3:16</button>
        <button onclick="testarSalmo23()">Salmo 23</button>
        <button onclick="testarMateus5()">Mateus 5 (Bem-aventuranÃ§as)</button>
        <button onclick="testarJoao14()">JoÃ£o 14 (Caminho, Verdade, Vida)</button>
        <button onclick="testarSalmo91()">Salmo 91 (ProteÃ§Ã£o)</button>
        <button onclick="testarApocalipse21()">Apocalipse 21 (Nova JerusalÃ©m)</button>
        <button onclick="testarProverbios31()">ProvÃ©rbios 31 (Mulher Virtuosa)</button>
        <button onclick="testarCache()">Verificar Cache</button>
        <button onclick="testarBuscaTexto()">Buscar Texto</button>
        <button onclick="limparResultados()">Limpar</button>
    </div>

    <div id="resultados"></div>

    <script>
        function log(mensagem, tipo = 'info') {
            const div = document.createElement('div');
            div.className = `resultado ${tipo}`;
            div.innerHTML = `<strong>${new Date().toLocaleTimeString()}</strong>: ${mensagem}`;
            document.getElementById('resultados').appendChild(div);
            div.scrollIntoView({ behavior: 'smooth' });
        }

        async function testarGenesis1() {
            log('ğŸ”„ Testando GÃªnesis 1...', 'loading');
            try {
                const resultado = await window.buscarCapituloBiblia('genesis', 1);
                if (resultado) {
                    log(`âœ… GÃªnesis 1 carregado! ${resultado.versiculos.length} versÃ­culos encontrados`, 'sucesso');
                    log(`ğŸ“– Primeiro versÃ­culo: "${resultado.versiculos[0].texto}"`, 'info');
                } else {
                    log('âš ï¸ GÃªnesis 1 nÃ£o encontrado, usando fallback', 'erro');
                }
            } catch (error) {
                log(`âŒ Erro ao carregar GÃªnesis 1: ${error.message}`, 'erro');
            }
        }

        async function testarJoao316() {
            log('ğŸ”„ Testando JoÃ£o 3:16...', 'loading');
            try {
                const resultado = await window.buscarVersiculoBiblia('joao', 3, 16);
                if (resultado) {
                    log(`âœ… JoÃ£o 3:16 carregado!`, 'sucesso');
                    log(`ğŸ“– Texto: "${resultado.texto}"`, 'info');
                } else {
                    log('âš ï¸ JoÃ£o 3:16 nÃ£o encontrado', 'erro');
                }
            } catch (error) {
                log(`âŒ Erro ao carregar JoÃ£o 3:16: ${error.message}`, 'erro');
            }
        }

        async function testarSalmo23() {
            log('ğŸ”„ Testando Salmo 23...', 'loading');
            try {
                const resultado = await window.buscarCapituloBiblia('salmos', 23);
                if (resultado) {
                    log(`âœ… Salmo 23 carregado! ${resultado.versiculos.length} versÃ­culos`, 'sucesso');
                    log(`ğŸ“– "O Senhor Ã© meu pastor": "${resultado.versiculos[0].texto}"`, 'info');
                } else {
                    log('âš ï¸ Salmo 23 nÃ£o encontrado', 'erro');
                }
            } catch (error) {
                log(`âŒ Erro ao carregar Salmo 23: ${error.message}`, 'erro');
            }
        }

        async function testarMateus5() {
            log('ğŸ”„ Testando Mateus 5 (Bem-aventuranÃ§as)...', 'loading');
            try {
                const resultado = await window.buscarCapituloBiblia('mateus', 5);
                if (resultado) {
                    log(`âœ… Mateus 5 carregado! ${resultado.versiculos.length} versÃ­culos`, 'sucesso');
                    // Procurar bem-aventuranÃ§as
                    const bemaventurancas = resultado.versiculos.filter(v => 
                        v.texto.toLowerCase().includes('bem-aventurado')
                    );
                    log(`ğŸ“– Encontradas ${bemaventurancas.length} bem-aventuranÃ§as`, 'info');
                } else {
                    log('âš ï¸ Mateus 5 nÃ£o encontrado', 'erro');
                }
            } catch (error) {
                log(`âŒ Erro ao carregar Mateus 5: ${error.message}`, 'erro');
            }
        }

        async function testarJoao14() {
            log('ğŸ”„ Testando JoÃ£o 14 (Caminho, Verdade, Vida)...', 'loading');
            try {
                const resultado = await window.buscarCapituloBiblia('joao', 14);
                if (resultado) {
                    log(`âœ… JoÃ£o 14 carregado! ${resultado.versiculos.length} versÃ­culos`, 'sucesso');
                    const versiculo6 = resultado.versiculos.find(v => v.numero === 6);
                    if (versiculo6) {
                        log(`ğŸ“– "Eu sou o caminho...": "${versiculo6.texto}"`, 'info');
                    }
                } else {
                    log('âš ï¸ JoÃ£o 14 nÃ£o encontrado', 'erro');
                }
            } catch (error) {
                log(`âŒ Erro ao carregar JoÃ£o 14: ${error.message}`, 'erro');
            }
        }

        async function testarSalmo91() {
            log('ğŸ”„ Testando Salmo 91 (ProteÃ§Ã£o)...', 'loading');
            try {
                const resultado = await window.buscarCapituloBiblia('salmos', 91);
                if (resultado) {
                    log(`âœ… Salmo 91 carregado! ${resultado.versiculos.length} versÃ­culos`, 'sucesso');
                    log(`ğŸ“– "Aquele que habita no esconderijo": "${resultado.versiculos[0].texto}"`, 'info');
                } else {
                    log('âš ï¸ Salmo 91 nÃ£o encontrado', 'erro');
                }
            } catch (error) {
                log(`âŒ Erro ao carregar Salmo 91: ${error.message}`, 'erro');
            }
        }

        async function testarApocalipse21() {
            log('ğŸ”„ Testando Apocalipse 21 (Nova JerusalÃ©m)...', 'loading');
            try {
                const resultado = await window.buscarCapituloBiblia('apocalipse', 21);
                if (resultado) {
                    log(`âœ… Apocalipse 21 carregado! ${resultado.versiculos.length} versÃ­culos`, 'sucesso');
                    log(`ğŸ“– "Novo cÃ©u e nova terra": "${resultado.versiculos[0].texto}"`, 'info');
                } else {
                    log('âš ï¸ Apocalipse 21 nÃ£o encontrado', 'erro');
                }
            } catch (error) {
                log(`âŒ Erro ao carregar Apocalipse 21: ${error.message}`, 'erro');
            }
        }

        async function testarProverbios31() {
            log('ğŸ”„ Testando ProvÃ©rbios 31 (Mulher Virtuosa)...', 'loading');
            try {
                const resultado = await window.buscarCapituloBiblia('proverbios', 31);
                if (resultado) {
                    log(`âœ… ProvÃ©rbios 31 carregado! ${resultado.versiculos.length} versÃ­culos`, 'sucesso');
                    const versiculo10 = resultado.versiculos.find(v => v.numero === 10);
                    if (versiculo10) {
                        log(`ğŸ“– "Mulher virtuosa": "${versiculo10.texto}"`, 'info');
                    }
                } else {
                    log('âš ï¸ ProvÃ©rbios 31 nÃ£o encontrado', 'erro');
                }
            } catch (error) {
                log(`âŒ Erro ao carregar ProvÃ©rbios 31: ${error.message}`, 'erro');
            }
        }

        async function testarBuscaTexto() {
            log('ğŸ”„ Testando busca textual...', 'loading');
            try {
                // Simular busca por "amor"
                const textos = [
                    'JoÃ£o 3:16 - "Porque Deus amou o mundo..."',
                    '1 JoÃ£o 4:8 - "Deus Ã© amor"',
                    '1 CorÃ­ntios 13:4 - "O amor Ã© paciente..."'
                ];
                
                log(`ğŸ” Simulando busca por "amor": ${textos.length} resultados encontrados`, 'sucesso');
                textos.forEach(texto => log(`ğŸ“– ${texto}`, 'info'));
                
            } catch (error) {
                log(`âŒ Erro na busca textual: ${error.message}`, 'erro');
            }
        }

        function testarCache() {
            const stats = window.bibliaAPI.getEstatisticasCache();
            log(`ğŸ“Š Cache atual: ${stats.totalItens} itens`, 'info');
            if (stats.totalItens > 0) {
                log(`ğŸ—‚ï¸ Itens no cache: ${stats.itens.join(', ')}`, 'info');
            }
        }

        function limparResultados() {
            document.getElementById('resultados').innerHTML = '';
            log('ğŸ§¹ Resultados limpos!', 'sucesso');
        }

        // Teste automÃ¡tico ao carregar
        window.onload = function() {
            log('ğŸš€ API da BÃ­blia carregada! Pronto para testes.', 'sucesso');
            log('ğŸ’¡ Clique nos botÃµes acima para testar diferentes funcionalidades.', 'info');
        };
    </script>
</body>
</html>